(function(e){e.Rating=function(t,n){var r={stars:5,rating:0,vote:"on"},i=this;i.settings={};var s=e(t),o=[],u,a,f;i.init=function(){i.settings=e.extend({},r,n),f=i.settings.rating,i.settings.vote==="on"?c():l()},i.setRating=function(e){return p(e),e},i.setRatingPercents=function(e){return p(e/100*i.settings.stars),e},i.getRating=function(){return f},i.getRatingPercents=function(){return f/i.settings.stars*100},i.voteOn=function(){i.settings.vote="on",c()},i.voteOff=function(){i.settings.vote="off",l()};var l=function(){var t,n=i.settings;s.empty(),s.addClass("static-rating"),t=(s.hasClass("small")?"14":"27")*n.stars,s.css("width",t),a=e('<div class="rating-value"></div>'),a.appendTo(s),p(f)},c=function(){var t=i.settings,n,r;s.empty(),s.removeClass("static-rating");for(r=1;r<=t.stars;r++)n=o[r]=e('<a href="javascript:void(0)"></a>'),n.data("starIndex",r),n.appendTo(s);u=s.find("a"),u.on("mouseenter",function(){var t=e(this).data("starIndex");h(0,!0),h(t),s.trigger("hovered",[t])}),u.on("mouseleave",function(){h(0),h(f,!0)}),u.on("click",function(){var t=e(this).data("starIndex");f=t,s.trigger("rated",[t])}),p(f)},h=function(e,t){var n=t?"rated":"hover";e=Math.round(e),u.removeClass(n),u.filter(":lt("+e+")").addClass(n)},p=function(e){var t=i.settings,n;f=e,t.vote==="on"?h(e,!0):(n=e/t.stars*100,a.css("width",n+"%"))};i.init()},e.fn.Rating=function(t){return this.each(function(){if(undefined==e(this).data("Rating")){var n=new e.Rating(this,t);e(this).data("Rating",n)}})},e.fn.RatingValue=function(t){var n=e(this.get(0)).data("Rating");if(typeof n!="undefined")return typeof t!="undefined"?n.setRating(t):n.getRating()},e.fn.RatingPercents=function(t){var n=e(this.get(0)).data("Rating");if(typeof n!="undefined")return typeof t!="undefined"?n.setRatingPercents(t):n.getRatingPercents()},e.fn.RatingVote=function(t){var n=e(this.get(0)).data("Rating");typeof n!="undefined"&&(t===!0||t==="on"?n.voteOn():(t===!1||t==="off")&&n.voteOff())}})(jQuery),$(function(){var e=$("[data-role=rating], .rating");e.each(function(e,t){var n={};$rating=$(t),n.stars=$rating.data("paramStars"),n.rating=$rating.data("paramRating"),n.vote=$rating.data("paramVote"),$rating.Rating(n)})})